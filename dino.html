<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Trex Runner Game</title>
    
    <style>
     body {
    font-family: Arial, sans-serif;
    overflow: hidden;
    }
    
    canvas {
    display: block;
    margin: 0 auto;
    background-color: #f7f7f7;
    border: 1px solid #ccc;
    }
    

    </style>
    
</head>
<body>
    <canvas id="gameCanvas" width="800" height="300"></canvas>
    

    <script>
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        
        let trexImage = new Image();
        trexImage.src = 'https://upload.wikimedia.org/wikipedia/commons/3/3b/Chromium_T-Rex-error-offline.svg';

        let birdImage = new Image();
        birdImage.src   = 'https://upload.wikimedia.org/wikipedia/commons/thumb/b/b1/Hummingbird_Bird_Vintage_Art.png/330px-Hummingbird_Bird_Vintage_Art.png'; // example bird sprite
        let cactusImage = new Image();
        cactusImage.src   = 'https://upload.wikimedia.org/wikipedia/commons/thumb/7/75/Cactus_with_small_base.png/250px-Cactus_with_small_base.png'; // example cactus


        

        let trex = {
            x: 50,
            y: 260,
            width: 40,
            height: 40,
            velocityY: 0,
            gravity: 0.9,
            isJumping: false
        };

            

        let game = {
            groundY: 260,
            spawnFrequency: 80,
            obstacleSpeed: 5,
            score: 0,

        }

        let obstacles = [];
        let frameCount = 0;
        let isGameOver = false;

        document.addEventListener('keydown', function (event) {
            if ((event.key === ' ' || event.key === 'ArrowUp') && !trex.isJumping && !isGameOver) {
                jump();
            }
        });

        document.addEventListener('touchstart', function () {
            if (!trex.isJumping && !isGameOver) {
                jump();
            }
        });

    

        function jump() {
            trex.isJumping = true;
            trex.velocityY = -15;
        }

        function update() {
            if (isGameOver) return;

            // Apply gravity
            trex.velocityY += trex.gravity;
            trex.y += trex.velocityY;

            if (trex.y >= game.groundY) {
                trex.y = game.groundY;
                trex.isJumping = false;
                trex.velocityY = 0;
            }

            // Spawn obstacles
            if (frameCount % game.spawnFrequency === 0) {
        const type = Math.random() < 0.5 ? 'cactus' : 'bird';
        let obstacle = { type, x: canvas.width };

        if (type === 'cactus') {
          obstacle.y      = game.groundY - 10;
          obstacle.width  = 30;
          obstacle.height = 50;
        } else {
          obstacle.y      = game.groundY - 40;   // fly height
          obstacle.width  = 40;
          obstacle.height = 30;
        }

        obstacles.push(obstacle);
      }
    

            // Update obstacles
        obstacles.forEach((o,i) => {
        o.x -= game.obstacleSpeed;
        // remove off-screen
        if (o.x + o.width < 0) {
          obstacles.splice(i, 1);
          game.score++;
        }

                // Check for collision
            if (
                trex.x < o.x + o.width &&
                trex.x + trex.width > o.x &&
                trex.y < o.y + o.height &&
                trex.y + trex.height > o.y
                ) {
                    // Collision detected
                    isGameOver = true;
                }
            });
        }
    
        function draw() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            // Draw Trex
            ctx.drawImage(trexImage, trex.x, trex.y, trex.width, trex.height);

            // Draw obstacles
            obstacles.forEach(o => {
        if (o.type === 'cactus') {
          // image or rectangle fallback
          if (cactusImage.complete) {
            ctx.drawImage(cactusImage, o.x, o.y, o.width, o.height);
          } else {
            ctx.fillStyle = '#555';
            ctx.fillRect(o.x, o.y, o.width, o.height);
          }
        } else {
          if (birdImage.complete) {
            ctx.drawImage(birdImage, o.x, o.y, o.width, o.height);
          } else {
            ctx.fillStyle = 'brown';
            ctx.fillRect(o.x, o.y, o.width, o.height);
          }
        }
      });
        ctx.fillStyle = 'black';
        ctx.font = '20px Arial';
        ctx.fillText(`Score: ${game.score}`, 10, 30);      
      // Draw game over text
            if (isGameOver) {
                ctx.fillStyle = 'red';
                ctx.font = '30px Arial';
                ctx.fillText('Game Over', canvas.width / 2 - 70, canvas.height / 2);
            }
        }

        function gameLoop() {
            frameCount++;
            update();
            draw();
            if (!isGameOver) {
                requestAnimationFrame(gameLoop);
            }
        }

        requestAnimationFrame(gameLoop);   
    </script>
</body>
</html>